# 1월 25일 구현사항

- 이벤트를 이용해 예약 기능을 구현하였다.
  1. `공연` 객체를 불러온다(없다면 예외처리한다).
  2. `예약` 객체를 초기화한다.
  3. `좌석정보` 객체를 초기화한다.
  4. 해당 공연의 좌석이 이미 예약되었다면 예외처리한다. 
  5. `예약` 이벤트를 발생시킨다.
     1. `공연 좌석` 객체를 불러온다(없다면 예외처리한다). 
     2. `공연 좌석`이 `예약 불가능`이면 예외처리한다. 
     3. `공연 좌석`의 `상태를 변환`시킨다. 
     4. 공연id를 이용해 예약 가능 좌석을 조회해 없다면 `만석` 이벤트를 발생시킨다. 
        1. `공연`을 불러온다. 
        2. `공연`의 `예약 가능 여부`를 `불가능`으로 만든다.
  6. `공연`객체를 저장한다.
  7. Response객체를 반환한다.
- ![스크린샷 2024-01-25 11 40 09](https://github.com/jinho-yoo-jack/wanted-preonboarding-challenge-backend-16/assets/99702271/b47fe8b6-7a6c-4650-8141-921c8b16e51b)
  - `JOIN`을 사용해야한다는 코멘트가 있었다. 
  - 기존 로직의 연관관계를 전부 집어넣자!(드디어!)

- UserInfo를 가지고 `공연`과 `예약`을 조회해서 ReservationResponse를 초기화해야한다. 
  - Raw Query를 이용하는 것도 방법일 것이다. 
  - 근데, 최근 네이버 부스트캠프를 하면서 Java를 잘 안쓰고, NestJS나 실제 쿼리를 쓰는 일이 잦았다. 
  - 그렇다면, 이참에 QueryDSL을 써보는 것은 어떨까?
  - QueryDSL을 이용하면 바로 ReservationResponse객체의 배열로 반환할 수 있다. 

# 궁금한 사항

